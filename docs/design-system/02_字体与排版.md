# Aura 拾光 · 字体与排版

> 文字是回忆的载体。
> 在 Aura 中，排版应该 **舒适、易读、有呼吸感**。

---

## 一、排版设计原则

### 1.1 核心理念

```
舒适的    而不是 紧凑的
有节奏的  而不是 均匀的
克制的    而不是 丰富的
留白的    而不是 填满的
```

### 1.2 排版禁区

| 禁止 | 原因 |
|------|------|
| 满屏文字 | 阅读疲劳 |
| 过小字号 (<12px) | 难以阅读 |
| 紧凑行高 (<1.4) | 压迫感 |
| 过多字体层级 | 混乱 |
| 花体/装饰字体 | 不符合产品气质 |

---

## 二、字体家族

### 2.1 双字体策略

| 用途 | 字体 | 说明 |
|------|------|------|
| 标题 | Noto Serif SC (思源宋体) | 稳重、有呼吸感、时间感 |
| 正文 | Noto Sans SC (思源黑体) | 清晰、舒适、现代 |

### 2.2 字体选择原因

**Noto Serif SC (标题)**

```
- 衬线字体，有书卷气
- 与"时间"、"回忆"主题契合
- 中英文混排良好
- 多字重可用
```

**Noto Sans SC (正文)**

```
- 无衬线字体，清晰易读
- 屏幕显示优秀
- 日常阅读舒适
- 字重丰富
```

### 2.3 字体回退

```dart
fontFamily: [
  'Noto Sans SC',      // 首选
  'PingFang SC',       // iOS 回退
  'Microsoft YaHei',   // Windows 回退
  'sans-serif',        // 通用回退
]

fontFamilySerif: [
  'Noto Serif SC',
  'Songti SC',         // macOS 回退
  'SimSun',            // Windows 回退
  'serif',
]
```

---

## 三、字体层级

### 3.1 语义化层级定义

| 名称 | 字体 | 大小 | 字重 | 行高 | 字间距 | 用途 |
|------|------|------|------|------|--------|------|
| `hero` | Serif | 56px | 300 | 1.1 | -1 | 首页时间数字 |
| `title` | Serif | 24px | 400 | 1.4 | 0 | 页面标题、时间叙事 |
| `subtitle` | Sans | 16px | 600 | 1.5 | 0.2 | 卡片标题、Section 标题 |
| `body` | Sans | 15px | 400 | 1.75 | 0.3 | 正文内容 |
| `bodySerif` | Serif | 17px | 400 | 1.85 | 0.2 | 详情页/信正文 |
| `caption` | Sans | 12px | 400 | 1.5 | 0.5 | 辅助说明、时间戳 |
| `micro` | Sans | 10px | 500 | 1.4 | 0.8 | 极小标签 |

### 3.2 层级使用场景

**hero (56px)**

```
- 首页天数显示: "365"
- 重要数字展示
- 仅用于数字或极短文字
```

**title (24px)**

```
- 页面主标题: "时间线"
- 时间叙事句: "这是 TA 的第 4 个秋天"
- 详情页时间锚点
```

**subtitle (16px)**

```
- 卡片标题: "去年的今天"
- 模块标题: "这一年的片段"
- 设置分组标题
```

**body (15px)**

```
- 时间线卡片正文
- 设置项描述
- 普通段落文字
```

**bodySerif (17px)**

```
- 记录详情页正文
- 年度信正文
- 需要沉浸阅读的长文
```

**caption (12px)**

```
- 时间戳: "2天前"
- 辅助说明: "已封存"
- 标签文字
```

**micro (10px)**

```
- 角标数字
- 极小状态指示
- 谨慎使用
```

### 3.3 Material TextTheme 映射

| Material 名称 | 映射的语义层级 | 说明 |
|--------------|--------------|------|
| `displayLarge` | 56px / Serif | 超大标题 |
| `displayMedium` | 40px / Serif | 大标题 |
| `displaySmall` | 32px / Serif | 中大标题 |
| `headlineLarge` | 28px / Serif | 页面主标题 |
| `headlineMedium` | 24px / Serif | 对应 `title` |
| `headlineSmall` | 20px / Serif | 小标题 |
| `titleLarge` | 18px / Sans / 600 | 卡片标题 |
| `titleMedium` | 16px / Sans / 600 | 对应 `subtitle` |
| `titleSmall` | 14px / Sans / 600 | 小型标题 |
| `bodyLarge` | 16px / Sans | 大正文 |
| `bodyMedium` | 15px / Sans | 对应 `body` |
| `bodySmall` | 13px / Sans | 小正文 |
| `labelLarge` | 14px / Sans / 600 | 按钮文字 |
| `labelMedium` | 12px / Sans / 500 | 对应 `caption` |
| `labelSmall` | 11px / Sans / 500 | 小标签 |

---

## 四、行高规范

### 4.1 行高原则

```
正文行高 ≥ 1.6
标题行高 ≈ 1.3-1.5
数字行高 ≈ 1.1
```

### 4.2 各层级行高

| 场景 | 行高 | 说明 |
|------|------|------|
| 大数字 (hero) | 1.1 | 紧凑，视觉统一 |
| 标题 (title) | 1.4 | 适度呼吸 |
| 副标题 (subtitle) | 1.5 | 清晰分隔 |
| 正文 (body) | 1.75 | 舒适阅读 |
| 宋体正文 (bodySerif) | 1.85 | 沉浸阅读 |
| 辅助文字 (caption) | 1.5 | 紧凑但清晰 |

### 4.3 段落间距

```dart
段落间距 = 行高 × 0.5 ~ 1.0
推荐: 正文段落间距 = 12-16px
```

---

## 五、字间距 (Letter Spacing)

### 5.1 字间距规范

| 场景 | 字间距 | 说明 |
|------|--------|------|
| 大字号 (>24px) | -0.5 ~ 0 | 略收紧，视觉平衡 |
| 标题 (16-24px) | 0 ~ 0.2 | 正常 |
| 正文 (14-16px) | 0.2 ~ 0.3 | 略松，利于阅读 |
| 小字号 (<14px) | 0.3 ~ 0.8 | 松散，提高可读性 |
| 全大写/标签 | 0.5 ~ 1.0 | 明显松散 |

### 5.2 中英文混排

```
中文字间距: 保持默认或轻微调整
英文/数字字间距: 按上述规范
混排时: 以中文为准，英文自然融入
```

---

## 六、文本对齐

### 6.1 对齐规范

| 场景 | 对齐方式 |
|------|---------|
| 标题 | 左对齐（默认）或居中 |
| 正文 | 左对齐 |
| 时间戳 | 左对齐或右对齐 |
| 按钮文字 | 居中 |
| 列表项 | 左对齐 |
| 空状态文案 | 居中 |
| 对话框内容 | 居中 |

### 6.2 禁止两端对齐

```
❌ 不使用 TextAlign.justify
原因: 中文两端对齐容易产生不均匀间距
```

---

## 七、文本截断

### 7.1 截断规则

| 场景 | 行数限制 | 截断方式 |
|------|---------|---------|
| 卡片标题 | 1行 | ellipsis |
| 卡片正文（列表） | 3-4行 | ellipsis + "展开" |
| 详情页正文 | 无限制 | 不截断 |
| 辅助说明 | 2行 | ellipsis |

### 7.2 实现示例

```dart
Text(
  content,
  maxLines: 4,
  overflow: TextOverflow.ellipsis,
  style: AppTypography.body,
)
```

---

## 八、数字排版

### 8.1 数字字体特性

```dart
// 使用等宽数字（tabular figures）
fontFeatures: [FontFeature.tabularFigures()]

// 用于:
// - 时间显示
// - 统计数字
// - 列表序号
```

### 8.2 大数字展示

```dart
// 首页天数
style: TextStyle(
  fontFamily: 'Noto Serif SC',
  fontSize: 56,
  fontWeight: FontWeight.w300,
  height: 1.1,
  letterSpacing: -1,
)
```

### 8.3 时间格式

```
日期: 2024年1月20日 或 1月20日
时间: 14:30 (24小时制) 或 下午2:30
相对时间: 2天前、3个月前
年龄: 3岁2个月
```

---

## 九、特殊排版场景

### 9.1 引用文字

```dart
// 信件中引用的回忆片段
Container(
  padding: EdgeInsets.only(left: 16),
  decoration: BoxDecoration(
    border: Border(
      left: BorderSide(
        color: AppColors.warmGray300,
        width: 2,
      ),
    ),
  ),
  child: Text(
    quote,
    style: AppTypography.body.copyWith(
      fontStyle: FontStyle.italic,
      color: AppColors.warmGray600,
    ),
  ),
)
```

### 9.2 诗句/短句

```dart
// 首页时间叙事
Text(
  "这是 TA 的第 4 个秋天",
  textAlign: TextAlign.center,
  style: AppTypography.title.copyWith(
    height: 1.6,
    letterSpacing: 1,
  ),
)
```

### 9.3 长文阅读

```dart
// 信正文、详情页正文
Text(
  content,
  style: AppTypography.bodySerif.copyWith(
    height: 1.85,
    letterSpacing: 0.2,
  ),
)
```

---

## 十、Dart 排版常量

```dart
class AppTypography {
  // Hero - 超大数字
  static TextStyle hero = TextStyle(
    fontFamily: 'Noto Serif SC',
    fontSize: 56,
    fontWeight: FontWeight.w300,
    height: 1.1,
    letterSpacing: -1,
    color: AppColors.warmGray900,
  );
  
  // Title - 页面标题
  static TextStyle title = TextStyle(
    fontFamily: 'Noto Serif SC',
    fontSize: 24,
    fontWeight: FontWeight.w400,
    height: 1.4,
    letterSpacing: 0,
    color: AppColors.warmGray900,
  );
  
  // Subtitle - 模块标题
  static TextStyle subtitle = TextStyle(
    fontFamily: 'Noto Sans SC',
    fontSize: 16,
    fontWeight: FontWeight.w600,
    height: 1.5,
    letterSpacing: 0.2,
    color: AppColors.warmGray900,
  );
  
  // Body - 正文
  static TextStyle body = TextStyle(
    fontFamily: 'Noto Sans SC',
    fontSize: 15,
    fontWeight: FontWeight.w400,
    height: 1.75,
    letterSpacing: 0.3,
    color: AppColors.warmGray700,
  );
  
  // Body Serif - 沉浸正文
  static TextStyle bodySerif = TextStyle(
    fontFamily: 'Noto Serif SC',
    fontSize: 17,
    fontWeight: FontWeight.w400,
    height: 1.85,
    letterSpacing: 0.2,
    color: AppColors.warmGray700,
  );
  
  // Caption - 辅助文字
  static TextStyle caption = TextStyle(
    fontFamily: 'Noto Sans SC',
    fontSize: 12,
    fontWeight: FontWeight.w400,
    height: 1.5,
    letterSpacing: 0.5,
    color: AppColors.warmGray500,
  );
  
  // Micro - 极小文字
  static TextStyle micro = TextStyle(
    fontFamily: 'Noto Sans SC',
    fontSize: 10,
    fontWeight: FontWeight.w500,
    height: 1.4,
    letterSpacing: 0.8,
    color: AppColors.warmGray500,
  );
}
```

---

## 十一、排版自检清单

- [ ] 正文行高是否 ≥ 1.6？
- [ ] 小字号字间距是否适当增大？
- [ ] 是否避免了满屏文字？
- [ ] 段落之间是否有足够间距？
- [ ] 字体层级是否不超过 4 种？
- [ ] 长文是否使用宋体？

---

> **记住：**
> 好的排版是隐形的。
> 用户只感受到舒适，而非"字体很漂亮"。
