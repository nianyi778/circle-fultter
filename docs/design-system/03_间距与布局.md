# Aura 拾光 · 间距与布局系统

> 留白不是"没设计"，而是产品最重要的"情绪空间"。
> 
> 本文档定义 Aura 的空间系统，确保每个页面都有足够的"呼吸感"。

---

## 一、设计理念

### 1.1 间距哲学

```
宁可多留白，不可密集
宁可少信息，不可拥挤
宁可多滚动，不可压缩
```

### 1.2 核心原则

| 原则 | 说明 |
|------|------|
| 呼吸感优先 | 每个元素都需要"呼吸的空间" |
| 层级分明 | 通过间距大小区分信息层级 |
| 一致性 | 相同层级的元素使用相同间距 |
| 克制 | 页面内容密度必须低于常规应用 |

---

## 二、基础间距系统

### 2.1 8px 基础网格

所有间距基于 **8px** 为基数，确保视觉一致性。

```dart
class AppSpacing {
  // 基础间距
  static const double xs   = 4.0;    // 0.5x - 极小
  static const double sm   = 8.0;    // 1x   - 小
  static const double md   = 12.0;   // 1.5x - 中小
  static const double base = 16.0;   // 2x   - 基础
  static const double lg   = 20.0;   // 2.5x - 中
  static const double xl   = 24.0;   // 3x   - 大
  static const double xxl  = 32.0;   // 4x   - 超大
  static const double xxxl = 48.0;   // 6x   - 巨大
}
```

### 2.2 间距使用场景

| Token | 值 | 使用场景 |
|-------|-----|---------|
| `xs` | 4px | 图标与文字间距、紧密元素 |
| `sm` | 8px | 同组元素内部间距 |
| `md` | 12px | 列表项内边距、标签间距 |
| `base` | 16px | 默认基础间距、按钮内边距 |
| `lg` | 20px | 卡片内边距、页面水平边距 |
| `xl` | 24px | 卡片之间间距 |
| `xxl` | 32px | 模块之间间距 |
| `xxxl` | 48px | 页面主要区块分隔 |

---

## 三、页面骨架

### 3.1 安全区域

```
┌─────────────────────────────────┐
│      Status Bar (系统)          │
├─────────────────────────────────┤
│  ← 20px →                       │
│ ┌───────────────────────────┐   │
│ │                           │   │
│ │      Content Area         │   │
│ │                           │   │
│ └───────────────────────────┘   │
│                       ← 20px →  │
├─────────────────────────────────┤
│      Bottom Nav / Safe Area     │
└─────────────────────────────────┘
```

### 3.2 页面边距

```dart
// 页面水平边距
static const double pagePadding = 20.0;
static const double pageH = 20.0;

// 页面顶部边距
static const double pageTop = 16.0;
```

### 3.3 典型页面结构

```dart
Scaffold(
  body: SafeArea(
    child: Padding(
      padding: EdgeInsets.symmetric(
        horizontal: AppSpacing.pagePadding,  // 20px
      ),
      child: Column(
        children: [
          SizedBox(height: AppSpacing.pageTop),  // 16px
          
          // Section 1
          _buildSection(),
          SizedBox(height: AppSpacing.sectionGap),  // 32px
          
          // Section 2
          _buildSection(),
          SizedBox(height: AppSpacing.sectionGap),  // 32px
          
          // Section 3
          _buildSection(),
        ],
      ),
    ),
  ),
)
```

---

## 四、模块间距

### 4.1 模块层级

```
页面
 └── 模块 (Section)
      └── 卡片组 (Card Group)
           └── 卡片 (Card)
                └── 内容 (Content)
```

### 4.2 间距规范

| 层级 | 间距 | Token |
|------|------|-------|
| 模块之间 | 32px | `sectionGap` |
| 卡片之间 | 24px | `cardGap` |
| 卡片内边距 | 20px | `cardPadding` |
| 内容元素间 | 12-16px | `md` / `base` |

### 4.3 视觉示意

```
┌─ Section 1 ────────────────────┐
│  Section Title                 │
│  ┌─ Card ─────────────────────┐│
│  │  ← 20px padding →          ││
│  │  Card Content              ││
│  │                            ││
│  └────────────────────────────┘│
│            ↕ 24px              │
│  ┌─ Card ─────────────────────┐│
│  │  Card Content              ││
│  └────────────────────────────┘│
└────────────────────────────────┘
              ↕ 32px
┌─ Section 2 ────────────────────┐
│  ...                           │
└────────────────────────────────┘
```

---

## 五、卡片系统

### 5.1 卡片基础样式

```dart
// 卡片圆角
static const double card = 24.0;

// 卡片内边距
static const double cardPadding = 20.0;

// 卡片间距
static const double cardGap = 24.0;
```

### 5.2 卡片变体

#### 标准卡片
```dart
Container(
  padding: EdgeInsets.all(AppSpacing.cardPadding),  // 20px
  decoration: BoxDecoration(
    color: AppColors.bgElevated,
    borderRadius: BorderRadius.circular(AppRadius.card),  // 24px
    boxShadow: AppShadows.paper,
  ),
  child: content,
)
```

#### 紧凑卡片
```dart
Container(
  padding: EdgeInsets.all(AppSpacing.base),  // 16px
  decoration: BoxDecoration(
    color: AppColors.bgElevated,
    borderRadius: BorderRadius.circular(AppRadius.lg),  // 20px
    boxShadow: AppShadows.subtle,
  ),
  child: content,
)
```

#### 宽松卡片（仪式感场景）
```dart
Container(
  padding: EdgeInsets.all(AppSpacing.xl),  // 24px
  decoration: BoxDecoration(
    color: AppColors.bgElevated,
    borderRadius: BorderRadius.circular(AppRadius.xxl),  // 32px
    boxShadow: AppShadows.soft,
  ),
  child: content,
)
```

---

## 六、圆角系统

### 6.1 圆角层级

```dart
class AppRadius {
  static const double xs   = 8.0;   // 小元素
  static const double sm   = 12.0;  // 按钮、输入框
  static const double md   = 16.0;  // 标签
  static const double lg   = 20.0;  // 中型卡片
  static const double xl   = 24.0;  // 大型卡片、底部弹窗
  static const double xxl  = 32.0;  // 特殊场景
  static const double full = 999.0; // 圆形
}
```

### 6.2 使用场景

| 元素 | 圆角 | Token |
|------|------|-------|
| 头像 | 圆形 | `full` (999) |
| 按钮 | 20px | `button` |
| 标签/Chip | 16px | `chip` |
| 输入框 | 12px | `input` |
| 卡片 | 24px | `card` |
| 底部弹窗 | 24px | `xl` |
| 对话框 | 24px | `xl` |

---

## 七、阴影系统

### 7.1 阴影层级

Aura 使用多层柔和阴影，模拟纸张质感。

```dart
class AppShadows {
  /// 极浅阴影（微浮起感）
  static List<BoxShadow> get subtle => [
    BoxShadow(
      color: AppColors.warmGray900.withOpacity(0.03),
      blurRadius: 2,
      offset: Offset(0, 1),
    ),
    BoxShadow(
      color: AppColors.warmGray900.withOpacity(0.02),
      blurRadius: 6,
      offset: Offset(0, 2),
    ),
  ];

  /// 柔和阴影（卡片）
  static List<BoxShadow> get soft;

  /// 纸张质感阴影（主要卡片）
  static List<BoxShadow> get paper;

  /// 浮层阴影（Modal、Drawer）
  static List<BoxShadow> get elevated;

  /// 底部导航栏阴影
  static List<BoxShadow> get navigation;
}
```

### 7.2 使用场景

| 阴影 | 使用场景 |
|------|---------|
| `subtle` | 列表项 hover、轻微浮起 |
| `soft` | 普通卡片、按钮 |
| `paper` | 主要内容卡片、记录卡片 |
| `elevated` | Modal、Drawer、底部弹窗 |
| `navigation` | 底部导航栏 |

---

## 八、典型布局模式

### 8.1 列表页布局

```dart
ListView.separated(
  padding: EdgeInsets.symmetric(
    horizontal: AppSpacing.pagePadding,
    vertical: AppSpacing.pageTop,
  ),
  separatorBuilder: (_, __) => SizedBox(height: AppSpacing.cardGap),
  itemBuilder: (_, index) => _buildCard(index),
)
```

### 8.2 详情页布局

```dart
SingleChildScrollView(
  padding: EdgeInsets.symmetric(
    horizontal: AppSpacing.pagePadding,
  ),
  child: Column(
    crossAxisAlignment: CrossAxisAlignment.start,
    children: [
      SizedBox(height: AppSpacing.xl),       // 顶部留白
      _buildHeader(),
      SizedBox(height: AppSpacing.xxl),      // 标题与内容间距
      _buildContent(),
      SizedBox(height: AppSpacing.xxxl),     // 内容与底部间距
      _buildActions(),
      SizedBox(height: AppSpacing.xxxl),     // 底部安全留白
    ],
  ),
)
```

### 8.3 表单页布局

```dart
Column(
  children: [
    _buildFormField(),
    SizedBox(height: AppSpacing.lg),   // 表单项间距 20px
    _buildFormField(),
    SizedBox(height: AppSpacing.lg),
    _buildFormField(),
    SizedBox(height: AppSpacing.xxl),  // 表单与按钮间距 32px
    _buildSubmitButton(),
  ],
)
```

---

## 九、留白自检

### 9.1 检查清单

- [ ] 页面水平边距是否为 20px？
- [ ] 模块之间间距是否 ≥ 32px？
- [ ] 卡片之间间距是否 ≥ 24px？
- [ ] 卡片内边距是否 ≥ 20px？
- [ ] 页面是否有"呼吸感"？
- [ ] 首屏内容是否过于密集？

### 9.2 常见问题

| 问题 | 解决方案 |
|------|---------|
| 页面看起来拥挤 | 增加模块间距、减少首屏信息量 |
| 卡片内容太挤 | 增加卡片内边距、减少内容 |
| 文字靠边太近 | 检查 padding 是否足够 |
| 滚动区域太短 | 添加底部安全区留白 |

---

## 十、响应式考虑

### 10.1 屏幕适配

```dart
// 小屏幕（< 360dp）
pagePadding: 16.0

// 标准屏幕（360-414dp）
pagePadding: 20.0

// 大屏幕（> 414dp）
pagePadding: 24.0
```

### 10.2 平板适配

对于平板设备，考虑最大内容宽度：

```dart
ConstrainedBox(
  constraints: BoxConstraints(maxWidth: 600),
  child: content,
)
```

---

## 代码实现参考

```dart
// time_circle_flutter/lib/core/theme/app_theme.dart

class AppSpacing {
  AppSpacing._();

  // 基础间距（8px 基数）
  static const double xs = 4.0;
  static const double sm = 8.0;
  static const double md = 12.0;
  static const double base = 16.0;
  static const double lg = 20.0;
  static const double xl = 24.0;
  static const double xxl = 32.0;
  static const double xxxl = 48.0;

  // 页面边距
  static const double pagePadding = 20.0;
  static const double pageH = 20.0;
  static const double pageTop = 16.0;

  // 模块间距
  static const double sectionGap = 32.0;

  // 卡片间距
  static const double cardPadding = 20.0;
  static const double cardGap = 24.0;
}
```

---

> **记住：**
> 留白是产品的呼吸空间。
> 当你觉得"这里可以再放点东西"时，
> 请克制住，让它保持空着。
