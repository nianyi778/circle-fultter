# Aura 拾光 · 组件规范

> 组件是设计语言的基础单元。
> 
> 每个组件都应该体现 Aura 的气质：温柔、安静、克制。

---

## 一、设计原则

### 1.1 组件设计哲学

| 原则 | 说明 |
|------|------|
| 柔和 | 无硬边、无强对比 |
| 克制 | 状态变化轻微、不喧宾夺主 |
| 一致 | 同类组件保持统一语言 |
| 呼吸 | 足够的内边距和留白 |

### 1.2 通用规范

- 所有可交互元素最小触控区域：**44×44px**
- 圆角优先使用语义化 Token
- 阴影保持柔和、多层
- 动效遵循动效系统规范

---

## 二、按钮 Button

### 2.1 按钮层级

```
Primary   →  主操作（封存、留下）
Secondary →  次要操作（取消、返回）
Ghost     →  隐形操作（更多、编辑）
Danger    →  危险操作（删除）
```

### 2.2 主按钮 Primary Button

用于页面主操作，一个页面最多一个主按钮。

```dart
// 视觉样式
背景: warmGray800 (#44403C)
文字: white
圆角: 20px
内边距: horizontal 24px, vertical 14px
字体: 14px / w500

// 状态
hover:  背景 warmGray700
pressed: 背景 warmGray900, scale 0.98
disabled: 背景 warmGray400, 透明度 50%
```

**代码示例：**
```dart
ElevatedButton(
  onPressed: () {},
  style: ElevatedButton.styleFrom(
    backgroundColor: AppColors.warmGray800,
    foregroundColor: AppColors.white,
    elevation: 0,
    padding: EdgeInsets.symmetric(horizontal: 24, vertical: 14),
    shape: RoundedRectangleBorder(
      borderRadius: BorderRadius.circular(AppRadius.button),
    ),
  ),
  child: Text('留下'),
)
```

### 2.3 次要按钮 Secondary Button

用于次要操作或取消。

```dart
// 视觉样式
背景: transparent
边框: warmGray300, 1px
文字: warmGray700
圆角: 20px
内边距: horizontal 24px, vertical 14px

// 状态
hover: 背景 warmGray100
pressed: 背景 warmGray200
```

### 2.4 幽灵按钮 Ghost Button

用于隐形操作、链接式操作。

```dart
// 视觉样式
背景: transparent
文字: warmGray600
圆角: 12px
内边距: horizontal 16px, vertical 8px

// 状态
hover: 背景 warmGray100
pressed: 文字 warmGray800
```

### 2.5 危险按钮 Danger Button

用于删除等不可逆操作。

```dart
// 视觉样式
背景: dangerDark (#DC2626)
文字: white
圆角: 20px

// 仅在二次确认弹窗中出现
// 主页面不直接展示危险按钮
```

### 2.6 按钮尺寸

| 尺寸 | 高度 | 字号 | 使用场景 |
|------|------|------|---------|
| Small | 32px | 12px | 卡片内操作 |
| Medium | 40px | 14px | 表单提交 |
| Large | 48px | 16px | 页面主操作 |

### 2.7 图标按钮

```dart
// 视觉样式
尺寸: 44×44px (触控区域)
图标尺寸: 24px
背景: transparent
图标颜色: warmGray600

// 状态
hover: 背景 warmGray100
pressed: 背景 warmGray200
```

---

## 三、卡片 Card

### 3.1 基础卡片

```dart
// 视觉样式
背景: white (#FFFFFF)
圆角: 24px
内边距: 20px
阴影: paper

// 代码
Container(
  padding: EdgeInsets.all(AppSpacing.cardPadding),
  decoration: BoxDecoration(
    color: AppColors.bgElevated,
    borderRadius: BorderRadius.circular(AppRadius.card),
    boxShadow: AppShadows.paper,
  ),
  child: content,
)
```

### 3.2 卡片变体

#### 记录卡片 Moment Card

```dart
// 结构
┌─────────────────────────────────┐
│ 头像  名字    ·  2天前          │
├─────────────────────────────────┤
│                                 │
│  [图片区域]                     │
│                                 │
├─────────────────────────────────┤
│ 文字内容...                     │
│                                 │
├─────────────────────────────────┤
│ 共鸣 · 3      评论 · 5          │
└─────────────────────────────────┘

// 样式
背景: white
圆角: 24px
阴影: paper
内边距: 顶部 16px, 侧边 16px, 底部 12px
```

#### 信件卡片 Letter Card

```dart
// 已封存状态
背景: warmOrangeLight
边框: warmOrange, 1px
图标: 信封密封图标
光效: primaryGlow 呼吸动画

// 可开启状态
背景: white
边框: warmOrange, 2px
图标: 信封开启图标
添加轻微浮动动画
```

#### 年度信预览卡片

```dart
// 视觉样式
背景: 渐变 (warmOrangeLight → white)
圆角: 28px
阴影: elevated
高度: 160px

// 内容
标题: "写给 TA · 4岁"
副标题: 解锁时间倒计时
装饰: 信封图标 + 微光效果
```

### 3.3 卡片状态

| 状态 | 视觉表现 |
|------|---------|
| 默认 | paper 阴影 |
| 悬浮 | soft 阴影 + 微上浮 |
| 按下 | scale 0.98 + subtle 阴影 |
| 禁用 | 透明度 50% |

---

## 四、输入框 Input

### 4.1 基础输入框

```dart
// 视觉样式
背景: white
边框: warmGray300, 1px
圆角: 12px
内边距: horizontal 16px, vertical 14px
文字: warmGray800
占位符: warmGray400

// 状态
focus: 边框 warmGray400, 1.5px
error: 边框 dangerDark, 1.5px
disabled: 背景 warmGray100, 透明度 50%
```

### 4.2 多行输入框 TextArea

```dart
// 用于记录内容输入
最小高度: 120px
最大高度: 自适应
边框: none (无边框设计)
背景: transparent
占位符: "写下这一刻的感受..."

// 字体
fontSize: 16px
lineHeight: 1.75
letterSpacing: 0.3
```

### 4.3 搜索框

```dart
// 视觉样式
背景: warmGray100
边框: none
圆角: full (pill 形状)
内边距: horizontal 16px, vertical 12px
图标: 搜索图标在左侧

// 占位符
"搜索回忆..."
```

---

## 五、标签 Tag / Chip

### 5.1 情绪标签

```dart
// 视觉样式
背景: 对应情绪色 Light 变体
文字: 对应情绪色 Deep 变体
圆角: 16px
内边距: horizontal 12px, vertical 6px
字体: 12px / w500

// 颜色映射
平静: calmBlueLight / calmBlueDeep
温暖: warmPeachLight / warmPeachDeep
安心: softGreenLight / softGreenDeep
思念: mutedVioletLight / mutedVioletDeep
```

### 5.2 时间标签

```dart
// 视觉样式
背景: warmGray100
文字: warmGray600
圆角: 8px
内边距: horizontal 8px, vertical 4px
字体: 12px / w400

// 示例
"3岁2个月" "2天前" "去年今天"
```

### 5.3 类型标签

```dart
// 照片/视频/语音/文字 类型标识
背景: transparent
边框: warmGray300, 1px
文字: warmGray600
圆角: full
内边距: horizontal 10px, vertical 4px
字体: 11px / w500
```

---

## 六、头像 Avatar

### 6.1 尺寸规范

| 尺寸 | 直径 | 使用场景 |
|------|------|---------|
| XS | 24px | 评论列表 |
| SM | 32px | 记录卡片头部 |
| MD | 44px | 家庭成员列表 |
| LG | 64px | 个人资料页 |
| XL | 80px | 孩子档案 |

### 6.2 视觉样式

```dart
// 基础样式
形状: 圆形
边框: none (默认)
背景: warmGray200 (占位)

// 带边框样式 (当前用户)
边框: primary, 2px

// 代码
CircleAvatar(
  radius: 22,
  backgroundImage: NetworkImage(url),
  backgroundColor: AppColors.warmGray200,
)
```

---

## 七、弹窗与浮层

### 7.1 底部弹窗 Bottom Sheet

```dart
// 视觉样式
背景: white
圆角: 顶部 24px
阴影: elevated
拖拽条: warmGray300, 40×4px

// 动效
入场: 从底部滑入, 300ms, easeOutCubic
退场: 向下滑出, 250ms

// 内容区域
内边距: 顶部 8px (拖拽条下), 侧边 20px, 底部 safe area
```

### 7.2 对话框 Dialog

```dart
// 视觉样式
背景: white
圆角: 24px
阴影: elevated
最大宽度: 320px
内边距: 24px

// 结构
┌─────────────────────────────────┐
│           标题                  │
│                                 │
│         说明文字                │
│                                 │
├─────────────────────────────────┤
│   [取消]           [确认]       │
└─────────────────────────────────┘

// 按钮布局
垂直排列 (移动端友好)
主按钮在上，取消在下
```

### 7.3 确认对话框

```dart
// 用于删除等危险操作
标题: "确定要删除吗？"
说明: "删除后无法恢复，但记忆永远在心里"
主按钮: "删除" (danger 样式)
取消按钮: "取消" (ghost 样式)

// 文案风格
温和地提醒，不制造恐惧
承认操作的严肃性，但不过度渲染
```

---

## 八、Toast 与反馈

### 8.1 Toast 提示

```dart
// 视觉样式
背景: warmGray800
文字: white
圆角: full (pill)
内边距: horizontal 20px, vertical 12px
字体: 14px / w500
最大宽度: 屏幕宽度 - 40px

// 位置
底部居中，距离 safe area 32px

// 动效
入场: 从下方淡入 + 上移 8px, 250ms
停留: 2000ms
退场: 淡出, 200ms
```

### 8.2 成功反馈

```dart
// 轻量成功
显示 Toast: "已保存" / "已留下"

// 仪式成功 (封存/发布)
显示专属动画 + 文案
详见 07_仪式感设计.md
```

### 8.3 错误反馈

```dart
// 视觉样式
背景: dangerLight
文字: dangerDark
图标: 警告图标

// 文案风格
说明问题，不责备用户
提供解决方案
示例: "网络不太顺畅，稍后会自动重试"
```

---

## 九、加载状态

### 9.1 骨架屏 Skeleton

详见 `06_状态设计.md`

```dart
// 基础样式
背景: warmGray200
圆角: 与目标元素一致
动画: shimmer (1.5s 循环)

// shimmer 效果
渐变: warmGray200 → warmGray100 → warmGray200
方向: 从左到右
```

### 9.2 加载指示器

```dart
// 全屏加载
居中显示
使用 CircularProgressIndicator
颜色: warmGray600
尺寸: 24px

// 列表加载更多
底部居中
尺寸: 20px
配合文字: "加载中..."
```

### 9.3 按钮加载态

```dart
// 视觉样式
保持按钮宽度不变
内容替换为加载指示器
禁用交互
透明度: 70%
```

---

## 十、导航组件

### 10.1 底部导航栏

```dart
// 视觉样式
背景: white
阴影: navigation
高度: 56px + safe area

// 图标
未选中: warmGray500, 24px
选中: warmGray800, 24px
无文字标签

// 动效
选中切换: 图标 scale 1.0 → 1.1 → 1.0, 150ms
```

### 10.2 顶部导航栏

```dart
// 视觉样式
背景: transparent
高度: 56px
无阴影

// 返回按钮
图标: 左箭头
颜色: warmGray700
尺寸: 24px

// 标题
字体: Noto Serif SC
字号: 20px
颜色: warmGray800
位置: 左对齐 (紧跟返回按钮)
```

---

## 十一、空状态

### 11.1 视觉样式

```dart
// 布局
垂直居中
图标/插画: 64-80px
标题: subtitle 样式
说明: body 样式, warmGray500

// 间距
图标与标题: 16px
标题与说明: 8px
说明与按钮: 24px
```

### 11.2 文案规范

详见 `06_状态设计.md`

---

## 十二、组件清单

### 12.1 基础组件

| 组件 | 状态 | 备注 |
|------|------|------|
| Button | ✅ | Primary/Secondary/Ghost/Danger |
| IconButton | ✅ | 标准图标按钮 |
| Card | ✅ | 基础卡片容器 |
| Input | ✅ | 单行/多行输入 |
| Tag | ✅ | 情绪/时间/类型标签 |
| Avatar | ✅ | 多尺寸头像 |
| Skeleton | ✅ | 骨架屏 |

### 12.2 复合组件

| 组件 | 状态 | 备注 |
|------|------|------|
| MomentCard | ✅ | 记录卡片 |
| LetterCard | ✅ | 信件卡片 |
| BottomSheet | ✅ | 底部弹窗 |
| Dialog | ✅ | 确认对话框 |
| Toast | ✅ | 轻提示 |
| EmptyState | ✅ | 空状态 |

### 12.3 待开发组件

| 组件 | 优先级 | 备注 |
|------|--------|------|
| Slider | 中 | 音量/进度控制 |
| Switch | 低 | 开关控制 |
| Checkbox | 低 | 多选 |
| Radio | 低 | 单选 |
| DatePicker | 中 | 日期选择 |

---

## 代码实现参考

```dart
// 组件位于
// time_circle_flutter/lib/core/widgets/

// 主题配置位于
// time_circle_flutter/lib/core/theme/app_theme.dart
```

---

> **记住：**
> 好的组件是隐形的。
> 用户不应该注意到"这个按钮设计得真好"，
> 而是自然地完成他们想做的事。
